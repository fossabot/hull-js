<!doctype html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link href="//neuestrap.s3.amazonaws.com/releases/neue/b18eaf457f93592526b33ca0f966668a91628036/stylesheets/neue.css" media="screen" rel="stylesheet" type="text/css" />

    <title>Hull JS Library</title>
    <script
    id="hull-js-sdk"
    data-platform-id="558979b4f59837f6160003c9"
    data-org-url="https://super.hullapp.io"
    data-js-url='http://localhost:3001/hull.js'
    src="http://localhost:3001/hull.js"></script>
    <script>
      // Hull.track('Test Event', {test: 'data'});
      // Hull.traits({coconuts: 12});
      // Hull.traits({swallows: 'african'});
      hullAsyncInit = function(hull) {
        console.log('Hull Async Init', hull),
        hull.ready(function(hull, me, app, org) {
          console.log('Hull Ready!', hull, me, app, org);
        });
        hull.ready().then(function({ hull, me, app, org }){
          console.log('HullPromise Ready', hull, me, app, org)
        })
        hull.on('hull.ready',function(hull, me, app, org) {
          console.log('Hull ready from event')
        });
        hull.on('hull.ships.ready', function() {
          console.log('Ships Ready');
        })
      }

      function addForm(trackable){
        var form = document.createElement("form");
        form.action = "/"
        form.method = "get"

        if (trackable) {
          form.className="trackable"
        }

        var input = document.createElement("input")
        input.type = "text";
        input.name = "foo";
        input.value = "foobar"

        var submit = document.createElement("input");
        submit.type = "submit"
        submit.value = "Submit"

        form.appendChild(input)
        form.appendChild(submit);
        form.addEventListener('submit', function onSubmit(e){
          console.log("FORM SUBMISSIONS--------------", e)
        })
        document.body.appendChild(form)
      }
      Hull.trackForm("form.trackable", function (form, serialized){
        return "Form Submitted"
      }, function properties(form, serialized) {
        return new Promise((resolve, reject) => {
          console.log("StartingTimeout")
          setTimeout(() => resolve(serialized), 1500)
        })
      }, { stopPropagation: true })
    </script>
  </head>
  <body>
    <div className="container-fluid mt-1">
      <div className="row">
        <a href="#" id="addForm" onClick="addForm()">Add new Form</a>
        <a href="#" id="addForm" onClick="addForm(true)">Add new Trackable Form</a>
        <hr>
        <form class="trackable" id="fform" class="" action="" method="get">
          <input type="text" name="foo" value="foo"/>
          <input type="submit" name="Submit" value="Submit"/>
        </form>

      </div>
    </div>
  </body>
</html>
